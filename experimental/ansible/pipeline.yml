pr: none
# schedules:
# - cron: "0 0 * * Sun"
#   displayName: Every Sunday midnight build
#   branches:
#     include:
#     - master
#   always: true

trigger:
  batch: true
  branches:
    include:
    - '*'
  paths:
    include:
      - experimental/ansible/*
      - ansible/roles/*
      - scripts/ansible*
    exclude:
      - experimental/ansible/readme.md

pool: Default

variables:
# >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
  # configuration file to use
  azhpc.config: experimental/ansible/config-roles-from.json
  # pipeline directory
  azhpc.pipeline_dir: experimental/ansible
  # destination of scripts. Default is hpcuser@headnode:/apps
  #azhpc.script_remote_dest: 'hpcadmin@jumpbox:.'

# Add the variables needed in your configuration file
# Uncomment and set values below, or leave commented and thru pipeline variables
  azhpc.variables.location: westeurope
  azhpc.variables.vm_type: Standard_HC44rs
  azhpc.variables.compute_instances: 4

# <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

jobs:
- template: ../../ci/templates/jobs/build.yml
  parameters:
    extra_steps: ../../../experimental/ansible/test.yml
