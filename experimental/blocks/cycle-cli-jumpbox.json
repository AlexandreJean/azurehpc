{
    "location": "variables.location",
    "resource_group": "variables.resource_group",
    "install_from": "variables.jumpbox",
    "admin_user": "variables.admin_user",
    "vnet": {
      "name": "variables.vnet_name"
    },
    "variables": {
      "location": "<NOT-SET>",
      "jumpbox": "fqdn.jumpbox",
      "resource_group": "<NOT-SET>",
      "vnet_name": "hpcvnet",
      "key_vault": "<NOT-SET>",
      "projectstore": "<NOT-SET>",
      "admin_user": "hpcadmin",
      "image": "OpenLogic:CentOS:7.7:latest",
      "jb_vm_type": "Standard_D8s_v3"
    },
    "resources": {
          "jumpbox": {
              "type": "vm",
              "vm_type": "variables.jb_vm_type",
              "accelerated_networking": true,
              "public_ip": true,
              "image": "variables.image",
              "subnet": "admin",
              "tags": [
                  "jumpbox"
              ]
          }
    },
    "install": [
      {
        "tag": "jumpbox",
        "script": "cyclecli_install.sh",
        "args": [
            "fqdn.cycleserver",
            "variables.admin_user",
            "secret.{{variables.key_vault}}.CycleAdminPassword",
            "variables.resource_group",
            "sakey.{{variables.projectstore}}"
        ]
      },
      {
        "type": "local_script",
        "script": "cc_nsg.sh",
        "args": [
            "variables.resource_group",
            "cycleserver"
        ]
      }  
    ]
  }
